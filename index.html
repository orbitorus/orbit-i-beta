<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Satellite Constellations Overview</title>
  <style>
    body { margin: 0; background: black; font-family: sans-serif; color: white; }

    /* Top banner */
    #top-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 50px;
      background: rgba(40, 40, 40, 0.95);
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 20px;
      padding: 0 20px;
      z-index: 20;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
    }

    #top-banner button, #top-banner select {
      padding: 6px 14px;
      font-size: 14px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      transition: background 0.2s, opacity 0.2s;
    }

    #top-banner button {
      background-color: #1e90ff;
      color: white;
    }

    #top-banner button:hover:not(:disabled) {
      background-color: #63b3ff;
    }

    #chart { width: 100%; height: 100vh; margin-top: 50px; }
  </style>
  <!-- Globe.gl library -->
  <script src="https://cdn.jsdelivr.net/npm/globe.gl"></script>
</head>
<body>

<div id="top-banner">
  <span>Constellation Visualization</span>

  <select id="constellation-select">
    <option value="all">All Active Satellites</option>
    <option value="oneweb">ðŸ‡¬ðŸ‡§ OneWeb</option>
    <option value="kuiper">ðŸ‡ºðŸ‡¸ Kuiper</option>
    <option value="starlink">ðŸ‡ºðŸ‡¸ Starlink</option>
    <option value="iridium-NEXT">ðŸ‡ºðŸ‡¸ Iridium-NEXT</option>
    <option value="hulianwang">ðŸ‡¨ðŸ‡³ Hulianwang</option>
    <option value="qianfan">ðŸ‡¨ðŸ‡³ Qianfan</option>
    <option value="planet">ðŸ‡ºðŸ‡¸ Planet</option>
  </select>

  <button id="orbit-btn" onclick="goToOrbitAnalysis()">Orbit Analysis</button>
</div>

<div id="chart"></div>

<script>
  // References
  const orbitBtn = document.getElementById('orbit-btn');
  const select = document.getElementById('constellation-select');

  // Disable/enable Orbit Analysis button based on selection
  function updateOrbitButton() {
    if (select.value === 'all') {
      orbitBtn.disabled = true;
      orbitBtn.style.opacity = 0.5;
    } else {
      orbitBtn.disabled = false;
      orbitBtn.style.opacity = 1;
    }
  }

  // Call immediately on page load
  updateOrbitButton();

  // Call whenever dropdown changes
  select.addEventListener('change', updateOrbitButton);

  // Navigate to the selected constellation folder
  function goToOrbitAnalysis() {
    const folder = select.value;
    if (folder !== 'all') {
      window.location.href = folder + '/index2.html';
    }
  }

  // -----------------------------
  // Globe.gl initialization
  // -----------------------------
  const world = Globe()(document.getElementById('chart'))
    .globeImageUrl('//cdn.jsdelivr.net/npm/three-globe/example/img/earth-night.jpg')
    .backgroundColor('#000')
    .showAtmosphere(true)
    .atmosphereColor('rgba(70, 120, 180, 0.3)');

  // Example: placeholder particle (satellite) data
  // This can be replaced with real TLE data
  const exampleSats = [
    { lat: 0, lng: 0, alt: 0.05 },
    { lat: 45, lng: 45, alt: 0.08 },
    { lat: -30, lng: 60, alt: 0.06 }
  ];

  world.particlesData(exampleSats)
       .particleLat(d => d.lat)
       .particleLng(d => d.lng)
       .particleAltitude(d => d.alt)
       .particlesColor(() => 'orange');

</script>
</body>
</html>
